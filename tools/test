'use strict';

var Nodeunit = require('nodeunit');
var glob = require('glob');
var tests = glob.sync('test/*.js');

function supports () {

    try {
        eval('(function * () {})');

        return true;
    } catch (ex) {

        return false;
    }
}

if ( supports() ) {
    tests = tests.concat( glob.sync('test/harmony/*.js') );
}

Nodeunit.reporters.default.run(tests, null, function (error) {

    if ( error ) {
        process.exit(1);

        return;
    }

    process.exit(0);
});
